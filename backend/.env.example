# Backend Services Environment Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# ENVIRONMENT
# =============================================================================

NODE_ENV=development

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# API Server
API_PORT=3001
WS_PORT=3002
HOST=0.0.0.0

# CORS Origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,https://app.intendly.xyz

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Database
DATABASE_URL=postgresql://intendly:password@localhost:5432/intendly
DB_POOL_MIN=2
DB_POOL_MAX=10

# Redis Cache
REDIS_URL=redis://localhost:6379
REDIS_KEY_PREFIX=intendly:

# =============================================================================
# BLOCKCHAIN CONFIGURATION
# =============================================================================

# Chain Configuration
CHAIN_ID=196
RPC_URL=https://xlayerrpc.okx.com

# Contract Addresses
PERMIT2_ADDRESS=0x000000000022D473030F116dDEE9F6B43aC78BA3
ROUTER_ADDRESS=0x0000000000000000000000000000000000000000
SETTLEMENT_CONTRACT_ADDRESS=0x0000000000000000000000000000000000000000

# =============================================================================
# SECURITY & AUTHENTICATION
# =============================================================================

# JWT Configuration (generate with: openssl rand -base64 64)
JWT_SECRET=your-super-secure-jwt-secret-at-least-32-characters-long

# API Rate Limiting
API_RATE_LIMIT_WINDOW=900000
API_RATE_LIMIT_MAX=100

# Helmet Security
HELMET_ENABLED=true

# =============================================================================
# BIDDING & SOLVER CONFIGURATION
# =============================================================================

# Bidding Window Configuration
BIDDING_WINDOW_MS=3000
MAX_SOLVER_FEE_BPS=30
MIN_BID_COUNT=1

# Solver Registry
SOLVER_REGISTRY_PRIVATE_KEY=0x0000000000000000000000000000000000000000000000000000000000000000

# =============================================================================
# WEBSOCKET CONFIGURATION
# =============================================================================

# WebSocket Settings
WS_HEARTBEAT_INTERVAL=30000
WS_CONNECTION_TIMEOUT=60000

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log Levels: error, warn, info, debug
LOG_LEVEL=info
LOG_FILE_PATH=./logs
LOG_MAX_FILES=14
LOG_MAX_SIZE=20m

# =============================================================================
# MONITORING & METRICS
# =============================================================================

# Prometheus Metrics
METRICS_ENABLED=true
PROMETHEUS_PORT=9090

# =============================================================================
# DEVELOPMENT & DEBUGGING
# =============================================================================

# Debug Flags
ENABLE_DEBUG=true
MOCK_SOLVER_ENABLED=false

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================

# Coordinator Service
COORDINATOR_URL=http://localhost:3001
WS_URL=ws://localhost:3002

# Block Explorer APIs
XLAYER_API_KEY=your-xlayer-api-key
ETHERSCAN_API_KEY=your-etherscan-api-key

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================

# Test Database
TEST_DATABASE_URL=postgresql://test:test@localhost:5432/intendly_test
TEST_REDIS_URL=redis://localhost:6379/1

# Test Blockchain
TEST_RPC_URL=https://testrpc.xlayer.tech
TEST_CHAIN_ID=195

# =============================================================================
# PRODUCTION OVERRIDES
# =============================================================================

# Production Database (uncomment for production)
# DATABASE_URL=postgresql://prod_user:secure_password@prod-db:5432/intendly_prod
# REDIS_URL=redis://prod-redis:6379

# Production Security (uncomment for production)
# JWT_SECRET=production-jwt-secret-should-be-very-long-and-secure
# LOG_LEVEL=warn
# ENABLE_DEBUG=false

# =============================================================================
# DOCKER CONFIGURATION
# =============================================================================

# Docker Network
DOCKER_NETWORK=intendly-network

# Service Discovery
POSTGRES_HOST=postgres
REDIS_HOST=redis

# =============================================================================
# SECURITY NOTES
# =============================================================================

# IMPORTANT SECURITY REMINDERS:
# 1. Never commit real secrets to version control
# 2. Use strong, unique passwords for all services
# 3. Rotate JWT secrets regularly
# 4. Use environment-specific configurations
# 5. Enable proper logging and monitoring
# 6. Use secure connection strings in production
# 7. Regularly update dependencies
# 8. Use proper firewall rules